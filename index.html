<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <title>서울시 지하철 도착 정보</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .arrival-time {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        button {
            margin: 20px 0;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>미아사거리 하행 차 도착 예정 시간</h1>
    <button id="loadData">도착 정보 불러오기</button>
    <div id="arrivalTimes"></div>

    <script>
        document.getElementById('loadData').addEventListener('click', function() {
            var xhr = new XMLHttpRequest();
            var url = 'https://data.seoul.go.kr/SeoulRtd/getCategoryList?page=1&category=%EC%A0%84%EC%B2%B4%EB%B3%B4%EA%B8%B0&count=15&sort=true'; 
            xhr.open('GET', url);
            xhr.onreadystatechange = function () {
                if (this.readyState == xhr.DONE && (xhr.status == 200 || xhr.status == 201)) {
                    var data = JSON.parse(this.responseText);
                    var arrivalTimesContainer = document.getElementById('arrivalTimes');
                    arrivalTimesContainer.innerHTML = ''; // 기존 데이터를 지우고 새로운 데이터로 갱신

                    data.realtimeArrivalList.forEach(function(seoul) {
                
                            var div = document.createElement('div');
                            div.className = 'arrival-time';
                            div.textContent = '지역명: ' + seoul.area_nm + ' / 밀집도: ' + train.area_congest_lvl;
                            arrivalTimesContainer.appendChild(div);
                       
                    });
                }
            };
            xhr.send();
        });
    </script>
</body>
</html>
